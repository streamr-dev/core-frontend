import cx from 'classnames'
import { Link } from 'react-router-dom'

import routes from '$routes'
import docsLinks from '$shared/../docsLinks'
import Image from '$docs/components/Image'

import StreamListing from './images/core_streams_01_desktop_border.jpg'
import StreamListing2x from './images/core_streams_01_desktop_border@2x.jpg'
import StreamDetails from './images/core_streams_02_desktop.jpg'
import StreamDetails2x from './images/core_streams_02_desktop@2x.jpg'
import StreamConfigure from './images/core_streams_03_desktop.jpg'
import StreamConfigure2x from './images/core_streams_03_desktop@2x.jpg'
import StreamPreview from './images/core_streams_04_desktop.jpg'
import StreamPreview2x from './images/core_streams_04_desktop@2x.jpg'
import StreamApiAccess from './images/core_streams_05_desktop.jpg'
import StreamApiAccess2x from './images/core_streams_05_desktop@2x.jpg'
import StreamPath from './images/stream_path_desktop.png'
import StreamPath2x from './images/stream_path_desktop@2x.png'
import StreamStorage from './images/stream_storage_desktop.png'
import StreamStorage2x from './images/stream_storage_desktop@2x.png'

import docsStyles from '$docs/components/DocsLayout/docsLayout.pcss'
import streamsStyles from '$docs/components/Pages/Streams/streamsStyles.pcss'

# Work with streams in Core
Streamr Core provides you with the tools to create, edit, share and delete your streams as well as view and inspect the streams you have subscribed to on the Marketplace.

### Overview of your streams
Head over to the <Link to={routes.streams.index()}>Streams page</Link> to see an overview of your subscribed streams. The list includes streams you have created and streams that you have subscribe to on the Marketplace.

<Image
  border
  src={StreamListing}
  highResSrc={StreamListing2x}
  alt="Stream Listing"
/>

The stream listing page displays all the streams the current user has the right to publish or subscribe to. Clicking on a stream will open the stream editor. You may only edit streams that you have created or have explicit permission to edit.

By clicking on the more options icon you may access advanced features for each stream, such as stream sharing and code snippets. A new stream can be created by the clicking the Create Stream button.

### Creating streams
Streams are identified by a stream ID, which is an Ethereum address plus a user-given path, just like an Internet URL. The Ethereum address is referred to as the domain and is either the Ethereum address of the logged in user, or it can also be the ENS (Ethereum Name Service) name owned by the Ethereum address of the logged in user. All streams require a unique path in the format of domain/pathname and can contain single or multi-level paths.

ENS names allow for completely human readable names, for example `mydomain.eth/traffic/helsinki`. If you haven’t used an ENS name before, you can easily create one with a small amount of ETH on <a href="https://ens.domains" target="_blank">ENS Domains</a>. Your purchased addresses will automatically appear in the stream editor for immediate usage. At a future date the stream registry will live on the blockchain.

Please remember, you may need to escape the pathname slash depending on your coding environment.

<Image
  src={StreamPath}
  highResSrc={StreamPath2x}
  alt="Stream path naming"
/>

### Stream status
Traffic light indicators can show you when data was last pushed to each stream, at a glance. 
- Green: The stream is active 
- Grey: The stream is inactive
- Red: There is a problem with the stream

The criteria for an inactive stream is defined in the stream editor.

### Editing a stream
The stream editor provides basic tools for setting up, inspecting and editing your stream. Below is a run-down of each stream editor section.

### Details
The details section provides basic information about your stream.

- The stream name is used to identify your stream in the Core app.
- The stream description can be used to offer more information about your stream and the kind of data it contains.
- The stream ID is the unique identifier for your stream and is needed when interacting with the <Link to={docsLinks.sdk}>Streamr SDKs</Link>.

<Image
  src={StreamDetails}
  highResSrc={StreamDetails2x}
  alt="Stream Details"
/>

### Configure
In this section you can configure stream fields and their data types. All fields have a name and a data type. The Autodetect feature can be used to automatically deduce fields from the stream's last received message. It is possible to manually correct the data types if automatic detection is not suitable for your stream.

<Image
  src={StreamConfigure}
  highResSrc={StreamConfigure2x}
  alt="Stream Configure"
/>

You can also optionally toggle on the requirement for all messages to be signed to enforce a level of verification if you choose.

### Preview
This section is used to preview data flowing into the stream. Use the live inspector to make sure your stream is receiving data and it is correctly formatted.

<Image
  src={StreamPreview}
  highResSrc={StreamPreview2x}
  alt="Stream Preview"
/>

### Data storage
On the Streamr Network data is stored in storage nodes. You can enable data storage on your streams to retain historical data in one or more geographic locations of your choice. You can also choose how long to store your stream’s historical data before auto-deletion.

<Image
  border
  src={StreamStorage}
  highResSrc={StreamStorage2x}
  alt="Stream storage"
/>

By default, no storage nodes are selected. You can opt-in to storage by selecting a storage node. At the moment there is only one option shown: Streamr Germany, however new options will be added as they become available.
