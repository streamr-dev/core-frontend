import { Link } from 'react-router-dom'
import links from '$shared/../links'
import docsStyles from '$docs/components/DocsLayout/docsLayout.pcss'
import FreeProduct from './images/free-product.png'
import PaidProduct from './images/paid-product.png'
import AccessPeriod from './images/access-period.png'
import SetAllowance from  './images/set-allowance.png'
import SetAllowanceMetamask from  './images/set-allowance-metamask.png'
import CompletePurchase from  './images/complete-purchase.png'
import CompletePurchaseMetamask from  './images/complete-purchase-metamask.png'
import TransactionComplete from './images/transaction-complete.png'

# Introduction to the Marketplace
The <Link to={links.marketplace.main}>Marketplace</Link> is an application that enables users to buy and sell access to real-time data content on the Streamr Network. The Marketplace is filled with both paid and free products, offering data producers an opportunity to either monetise their data or make it freely available to everyone. Products have time-based subscription periods, and the currency used on the Marketplace is the <Link to={links.docs.dataToken.root}>DATA token</Link>.

The Marketplace is an <a href="https://github.com/streamr-dev/streamr-platform" target="_blank">open source</a> project that builds on the <a href="https://streamr.com/network" target="_blank">Streamr Network</a> and the <a href="https://www.ethereum.org" target="_blank">Ethereum blockchain</a>.

Ethereum is used to store a registry of data products, coordinate access to them, and to provide a secure ledger of value transactions. Products are published to the <a href="https://etherscan.io/address/0xa10151d088f6f2705a05d6c83719e99e079a61c1" target="_blank">Marketplace smart contract</a>, and the contract allows data buyers to directly transact with sellers using the DATA token, removing all traditionally present middlemen and their fees. All of the data on the Marketplace is delivered peer-to-peer via the Streamr Network.


## Buying data on the Marketplace

### Free products

To get access to a free product, simply click the **Add to my purchases** button. You will then have access to the streams in that product.

<img src={FreeProduct} />

### Paid products

Clicking the **Purchase** button initiates the purchase dialog which guides you through the contract transaction process.

<img src={PaidProduct} />

A dialog will pop up where you select the desired access period.

<img src={AccessPeriod} />

The marketplace uses smart contracts to withdraw tokens from your account. In order to allow the smart contract to execute the transfer, an allowance must be set to give permission to withdraw up to a certain amount of your tokens. 

This is a security measure for ERC20 tokens that means that the smart contract will only ever be able to transfer the amount of tokens that you approve.

<img src={SetAllowance} />

To complete the the allowance step, confirm the transaction in Metamask.

<img src={SetAllowanceMetamask} />

After setting the allowance, you will be asked to confirm the payment.

<img src={CompletePurchase} />

Finally, confirm the transaction in Metamask to complete your purchase.

<img src={CompletePurchaseMetamask} />

While the transaction is being mined, you can either wait for it to complete or continue browsing the Marketplace. You will be notified after it has completed.

<img src={TransactionComplete} />

Note that while you may purchase products with any Web3 wallet, the purchases will not be visible until you <Link to={links.docs.gettingStarted.root}>link the account to your profile</Link>.
